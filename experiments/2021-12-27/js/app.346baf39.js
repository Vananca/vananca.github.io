(function(e){function t(t){for(var n,a,s=t[0],l=t[1],u=t[2],d=0,c=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&c.push(i[a][0]),i[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);h&&h(t);while(c.length)c.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,s=1;s<r.length;s++){var l=r[s];0!==i[l]&&(n=!1)}n&&(o.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},i={app:0},o=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var h=l;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"282a":function(e){e.exports=JSON.parse('[{"key":"particle","url":"./textures/particle.png","source":"particle.png","loadOnInit":true},{"key":"perlin-noise","url":"./textures/perlin-512.jpg","source":"perlin-512.png","loadOnInit":true},{"key":"coin-noise","url":"./textures/coin-noise.jpg","source":"coin-noise.jpg","loadOnInit":true},{"key":"envMap","url":"./textures/env-map.exr","source":"env-map.exr","loadOnInit":true}]')},"2a9b":function(e,t,r){},"5c0b":function(e,t,r){"use strict";r("9c0c")},7538:function(e,t,r){"use strict";r("2a9b")},"9b34":function(e){e.exports=JSON.parse('[{"id":"ambience_vault","loop":true,"file":"Ambience_Vault_BG_1_v02_LP","stereo":true,"bitrate":320,"volume":0.6},{"id":"drag_1","loop":true,"file":"Coin_drag_Amb_1_v01_LP","bitrate":320,"stereo":true},{"id":"drag_2","loop":true,"file":"Coin_drag_Amb_2_v01_LP","bitrate":320,"stereo":true}]')},"9c0c":function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);var n=r("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("ExperimentWrapper"),r("div",{staticClass:"Logo"},[r("svg",{attrs:{width:"87",height:"62",viewBox:"0 0 67 42",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"M1.81151 19.2159H0V18.6477H1.81151V14.5759L7.93726 13.1239V18.6477H15.6448V19.2159H7.93726V29.8531C7.93726 31.7153 8.23369 32.7254 9.38646 32.7254C10.5946 32.7254 11.0008 31.3367 11.2972 29.1903L11.8571 29.2534C11.5607 31.7153 10.8965 33.988 7.41049 33.988C4.14978 33.988 1.81151 33.0728 1.81151 29.1587V28.3376V19.2159Z",fill:"#FFFAEB"}}),r("path",{attrs:{d:"M19.6367 30.9583C19.6367 37.5235 17.5288 41.5637 11.6995 41.5637C7.71417 41.5637 6.42987 39.67 6.42987 38.0603C6.42987 36.1664 7.81298 35.2194 9.45981 35.2194C11.2054 35.2194 11.9957 36.2927 11.9957 37.65C11.9957 38.0917 11.8971 38.597 11.7983 38.9757H10.5467C9.78917 40.1119 10.5467 41.0273 11.6663 41.0273C13.1485 41.0273 13.511 39.9856 13.511 35.4404V19.2162H11.3701V18.648H19.6367V30.9583Z",fill:"#FFFAEB"}}),r("path",{attrs:{d:"M28.7689 18.6474V33.1039H33.9935V33.6721H20.8317V33.1039H22.6432V19.2156H18.184V18.6474H28.7689Z",fill:"#FFFAEB"}}),r("path",{attrs:{d:"M38.5137 18.6474V21.5515C39.0734 19.9732 40.1606 18.3318 43.4213 18.3318C46.4842 18.3318 48.526 19.7838 48.526 23.6033V33.1039H53.1916V33.6721H41.0496V33.1039H42.4V22.8455C42.4 20.1626 42.0046 19.8469 41.1812 19.8469C39.7983 19.8469 38.5137 21.8354 38.5137 24.3922V33.1039H39.9298V33.6721H30.5763V33.1039H32.3878V19.2156H30.5763V18.6474H38.5137Z",fill:"#FFFAEB"}}),r("path",{attrs:{d:"M55.2455 24.6135C55.2455 27.5805 55.8056 28.2434 56.7937 28.2434C57.6828 28.2434 58.2427 27.7383 58.2427 24.4557V22.9089C58.2427 19.3738 57.7157 18.9003 56.8267 18.9003C55.9042 18.9003 55.2455 19.4685 55.2455 22.9089V24.6135ZM63.1503 16.4697C63.2489 15.9647 63.0512 15.4912 62.3593 15.4912C61.9314 15.4912 60.9433 15.6175 60.9433 17.5745C60.9433 18.0796 61.0094 18.7109 61.1741 19.4685C62.4586 20.289 63.6768 21.3938 63.6768 23.4771C63.6768 27.0754 60.9765 28.8747 56.9584 28.8747C56.0033 28.8747 54.9822 28.7482 54.2903 28.6221C53.1376 29.3166 52.8414 29.6638 52.8414 29.9479C52.8414 30.2318 53.2037 30.3896 54.9491 30.3896H58.3084C62.03 30.3896 65.7847 31.2419 65.7847 35.5346C65.7847 39.0384 63.1503 41.5635 56.4973 41.5635C50.7666 41.5635 48.3622 40.2379 48.3622 38.1862C48.3622 36.6079 49.7453 35.9765 50.8981 35.6609L52.8743 36.5132C52.6767 37.2076 52.611 37.7442 52.611 38.2493C52.611 39.575 53.3022 40.9637 56.8267 40.9637C60.3177 40.9637 62.1622 39.6066 62.1622 37.618C62.1622 36.103 61.4373 35.5031 57.979 35.5031H54.7844C50.8652 35.5031 49.8114 33.9563 49.8114 32.5677C49.8114 30.7684 50.9971 29.8848 53.5662 28.4012C50.9971 27.7067 49.7453 26.2231 49.7453 23.6034C49.7453 20.6364 51.8862 18.3319 56.8594 18.3319C58.4731 18.3319 59.4287 18.5531 60.5153 19.1211C60.3836 18.5531 60.3177 18.048 60.3177 17.5745C60.3177 14.9862 62.1947 14.2286 63.5453 14.2286C65.0935 14.2286 66.2131 15.0495 66.2131 16.5644C66.2131 18.0165 65.225 18.6476 64.1379 18.6476C63.1503 18.6476 62.2939 18.0796 62.2278 17.0064L63.1503 16.4697Z",fill:"#FFFAEB"}}),r("path",{attrs:{d:"M26.8828 7.73424C26.8828 11.5697 23.6388 14.6787 19.6367 14.6787C15.6347 14.6787 12.3907 11.5697 12.3907 7.73424C12.3907 3.89879 15.6347 0.789772 19.6367 0.789772C23.6388 0.789772 26.8828 3.89879 26.8828 7.73424Z",fill:"#FFFAEB"}}),r("path",{attrs:{d:"M21.7941 33.3037L22.7554 33.1894V19.0759L20.4632 18.9793C19.2024 18.9261 20.5334 18.857 23.4209 18.8256L28.6709 18.7686V33.2254H32.5159V19.088L31.5547 18.9737C31.026 18.9108 32.357 18.8389 34.5124 18.814L38.4313 18.7686L38.458 20.2568C38.4727 21.0753 38.462 24.3187 38.4343 27.4642L38.3839 33.1833L39.221 33.3036C39.6814 33.3698 35.7323 33.4226 30.4454 33.421C25.1584 33.4194 21.2653 33.3667 21.7939 33.3038L21.7941 33.3037Z",fill:"#FFFAEB"}}),r("path",{attrs:{d:"M16.5457 13.7565C11.5867 11.3157 11.1994 4.87106 15.8419 2.04939C19.3195 -0.0642502 23.8007 1.01786 25.7948 4.45281C26.5262 5.7127 26.6083 6.11159 26.5337 8.04405C26.4608 9.93531 26.3334 10.3768 25.5545 11.4389C24.2353 13.2379 22.2233 14.3274 19.9877 14.4536C18.4486 14.5405 17.9218 14.4338 16.5457 13.7565L16.5457 13.7565Z",fill:"#FFFAEB"}}),r("path",{attrs:{d:"M4.87296 33.5987C3.82785 33.3187 2.9969 32.6399 2.51998 31.6766C2.13897 30.9071 2.05083 29.6356 2.05083 24.908V19.0869L0.128326 18.8583L2.05083 18.7675V14.6192L4.19516 14.1344C5.37457 13.8678 6.63905 13.5745 7.00498 13.4826C7.66089 13.3179 7.67048 13.3546 7.67048 16.0281V18.7405L11.3676 18.9418L7.60625 19.051L7.71232 25.3992C7.8096 31.2207 7.86641 31.7982 8.39698 32.3601C8.82156 32.8097 9.17578 32.9259 9.72792 32.7964C10.447 32.6277 10.4573 32.6423 9.96174 33.1254C9.58185 33.4957 8.90955 33.6473 7.4477 33.6923C6.35015 33.726 5.19155 33.6838 4.87288 33.5985L4.87296 33.5987Z",fill:"#FFFAEB",stroke:"#FFFAEB","stroke-width":"0.475195"}}),r("path",{attrs:{d:"M52.2505 41.064C51.3108 40.8603 50.1794 40.435 49.7364 40.1188C48.0725 38.9316 48.1746 37.0882 49.9532 36.2067C50.7643 35.8048 50.9401 35.8036 51.7298 36.195C52.5112 36.5823 52.6034 36.7671 52.5797 37.8981C52.5437 39.6178 53.1697 40.4434 54.81 40.8393C56.5794 41.2663 57.5492 41.2451 59.3205 40.741C61.0892 40.2376 62.0555 39.3328 62.2876 37.9627C62.4271 37.139 62.3254 36.8228 61.7412 36.2629C61.067 35.6168 60.7721 35.5664 56.886 35.4324C52.6585 35.2867 50.8188 34.8523 50.4418 33.9109C50.3127 33.5883 49.3464 33.4991 45.6127 33.4651C43.0454 33.4417 41.311 33.3695 41.7583 33.3045L42.5717 33.1864L42.5673 27.1817C42.5628 21.0032 42.3782 19.8681 41.3466 19.6777C41.0877 19.6299 40.4588 19.9272 39.9491 20.3382C38.9223 21.1662 38.7848 21.0792 39.49 20.0477C40.5664 18.4733 44.6174 18.0053 46.3648 19.2536C48.1602 20.536 48.33 21.2094 48.4395 27.484L48.5397 33.2243H49.2529C49.8567 33.2243 49.966 33.0864 49.966 32.3253C49.966 31.6293 50.2678 31.1491 51.3022 30.1993C52.7219 28.8956 53.4576 28.5833 52.9446 29.502C52.7819 29.7933 52.7329 30.1122 52.8356 30.2106C52.9383 30.3091 54.0982 30.3952 55.4132 30.4021C58.9598 30.4205 61.9244 30.8176 63.1892 31.4435C65.4346 32.5548 66.2767 35.4742 65.0514 37.8998C64.3786 39.2318 63.2203 40.1489 61.4162 40.7781C59.72 41.3697 54.4221 41.5352 52.2505 41.0644L52.2505 41.064Z",fill:"#FFFAEB"}}),r("path",{attrs:{d:"M53.395 28.583C53.4918 28.3412 53.2897 28.1298 52.8636 28.0273C52.4855 27.9364 51.7122 27.4033 51.1454 26.8428C50.1576 25.8661 50.1146 25.7364 50.1146 23.7342C50.1146 21.2821 50.5946 20.4483 52.6351 19.3565C54.2992 18.4659 57.8619 18.2043 59.4832 18.8536L60.5655 19.2869L60.5509 17.7329C60.5429 16.8782 60.66 16.0604 60.8112 15.9155C60.9806 15.7532 61.0407 16.3353 60.9679 17.4314C60.8511 19.1887 60.8644 19.2248 62.0385 20.3501C63.8395 22.0762 64.0546 24.391 62.6038 26.4366C61.5088 27.9807 59.9995 28.5424 56.8287 28.5858C55.3159 28.6065 53.996 28.7022 53.8956 28.7984C53.5614 29.1186 53.2364 28.9789 53.3949 28.5831L53.395 28.583ZM57.7879 27.7763C58.4524 26.8671 58.4524 20.3076 57.7879 19.3984C57.1699 18.5527 56.3043 18.6034 55.6762 19.5221C54.9173 20.6321 54.9107 26.5308 55.6671 27.6383C56.3034 28.5699 57.1668 28.626 57.7879 27.7762L57.7879 27.7763Z",fill:"#FFFAEB"}}),r("path",{attrs:{d:"M62.8082 17.8914C62.2677 17.319 62.267 17.286 62.7884 16.9207C63.6474 16.3187 63.2856 15.507 62.1595 15.5103C61.0093 15.5136 60.9524 15.308 61.9604 14.791C62.9805 14.2678 64.6655 14.35 65.3654 14.957C66.1185 15.6102 66.1368 17.3732 65.3972 18.0148C64.6544 18.659 63.4803 18.603 62.8082 17.8914L62.8082 17.8914Z",fill:"#FFFAEB"}})])])],1)},o=[],a=r("9ab4"),s=r("1b40"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ExperimentWrapper"},[r("div",{ref:"threeTargetContainer",staticClass:"threeTargetContainer"})])},u=[],h=r("5a89");function d(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var c=0;function v(e){return"__private_"+c+++"_"+e}var m=v("renderer"),f=v("usePostEffects");class p{constructor(){Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),d(this,f)[f]=!1,this.el=document.createElement("canvas"),this.el.style.position="absolute",this.el.style.top="0px",this.el.style.left="0px",this.el.style.width="100%",this.el.style.height="100%",d(this,m)[m]=new h["Gb"]({canvas:this.el,antialias:!1,alpha:!0,stencil:!0,preserveDrawingBuffer:!1,powerPreference:"high-performance"}),d(this,m)[m].autoClear=!d(this,f)[f],d(this,m)[m].outputEncoding=d(this,f)[f]?h["G"]:h["Hb"],d(this,m)[m].info.autoReset=!1,d(this,m)[m].setClearColor(0),d(this,m)[m].setClearAlpha(1),d(this,m)[m].toneMapping=h["X"],d(this,m)[m].shadowMap.enabled=!1,d(this,m)[m].shadowMap.type=h["bb"],d(this,m)[m].setPixelRatio(window.devicePixelRatio),this.el.addEventListener("webglcontextlost",e=>{e.preventDefault()},!1)}get usePostEffects(){return d(this,f)[f]}set usePostEffects(e){d(this,f)[f]=e,d(this,m)[m].autoClear=!d(this,f)[f],d(this,m)[m].outputEncoding=d(this,f)[f]?h["G"]:h["Hb"]}getRenderer(){return d(this,m)[m]}}var g=new p;class b{constructor(){this.earlyDelegates=[],this.delegates=[],this.once=[]}addEarly(e){return void 0===this.earlyDelegates.find(t=>t===e)&&this.earlyDelegates.push(e),this}add(e){return void 0===this.delegates.find(t=>t===e)&&this.delegates.push(e),this}addOnce(e){return void 0===this.once.find(t=>t===e)&&this.once.push(e),this}remove(e){let t=this.earlyDelegates.findIndex(t=>t===e);-1!==t&&this.earlyDelegates.splice(t,1),t=this.delegates.findIndex(t=>t===e),-1!==t&&this.delegates.splice(t,1),t=this.once.findIndex(t=>t===e),-1!==t&&this.once.splice(t,1)}removeAll(){this.earlyDelegates.length=0,this.delegates.length=0,this.once.length=0}invoke(e){this.earlyDelegates.forEach(t=>{t(e)}),this.delegates.forEach(t=>{t(e)}),this.once.length>0&&(this.once.forEach(t=>{t(e)}),this.once.length=0)}}function w(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var C=0;function x(e){return"__private_"+C+++"_"+e}var y=x("onResizeDebouncedTimeout");class M{constructor(){Object.defineProperty(this,y,{writable:!0,value:void 0}),this.onResize=new b,this.isSSR="undefined"===typeof window,this.size={width:this.isSSR?1:window.innerWidth,height:this.isSSR?1:window.innerHeight,sizeRatio:1},this.resizeHandler=()=>{this.size.width===window.innerWidth&&this.size.height===window.innerHeight||(this.size.width=window.innerWidth,this.size.height=window.innerHeight,w(this,y)[y]&&window.clearTimeout(w(this,y)[y]),w(this,y)[y]=setTimeout(()=>{this.size.width===window.innerWidth&&this.size.height===window.innerHeight||(this.size.width=window.innerWidth,this.size.height=window.innerHeight,this.onResize.invoke(this.size))},500),this.onResize.invoke(this.size))},this.size.sizeRatio=this.isSSR?1:window.devicePixelRatio}async init(){this.isSSR||(window.addEventListener("resize",this.resizeHandler),this.resizeHandler())}getSize(){return this.size}}var S=new M,T=r("32d9"),_=r("93e9"),F=r("360d"),E={uniforms:{tPrev:{type:"t",value:0,texture:null},tDiffuse:{type:"t",value:0,texture:null},tGlow:{type:"t",value:1,texture:null},tBloom:{type:"t",value:1,texture:null},bloomAmount:{value:0},distortAmount:{value:0},fadeAmount:{value:0},invertAmount:{value:0},resolution:{value:new h["Cb"](window.innerWidth,window.innerHeight)},time:{value:0},fxAmount:{value:0}},vertexShader:"\n    varying vec2 vUv;\n    //varying vec2 screenPosition;\n\n    void main() {\n      \n      vUv = vec2( uv.x, uv.y );\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform sampler2D tBloom;\n    uniform float fxAmount;\n    uniform float bloomAmount;\n    uniform float fadeAmount;\n    uniform float time;\n    uniform vec2 resolution;\n    varying vec2 vUv;\n\n    void main() {\n      \n      vec4 texel = texture2D( tDiffuse, vUv);\n      vec4 bloomFx = texture2D( tBloom, vUv );\n      \n      gl_FragColor = LinearTosRGB(texel + bloomFx*bloomAmount);\n      gl_FragColor = mix(gl_FragColor,vec4(0.0,0.0,0.0,1.0), fadeAmount);\n      \n    }\n  "},P={uniforms:{tDiffuse:{type:"t",value:new h["wb"]},resolution:{type:"v2",value:new h["Cb"]}},vertexShader:"\n    varying vec2 vUv;\n\n    varying vec2 v_rgbNW;\n    varying vec2 v_rgbNE;\n    varying vec2 v_rgbSW;\n    varying vec2 v_rgbSE;\n    varying vec2 v_rgbM;\n\n    uniform vec2 resolution;\n\n    void main() {\n    vUv = uv;\n    vec2 fragCoord = uv * resolution;\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\n    }\n  ",fragmentShader:"\n    varying vec2 vUv;\n\n    //texcoords computed in vertex step\n    //to avoid dependent texture reads\n    varying vec2 v_rgbNW;\n    varying vec2 v_rgbNE;\n    varying vec2 v_rgbSW;\n    varying vec2 v_rgbSE;\n    varying vec2 v_rgbM;\n\n    //make sure to have a resolution uniform set to the screen size\n    uniform vec2 resolution;\n    uniform sampler2D tDiffuse;\n\n    #ifndef FXAA_REDUCE_MIN\n        #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n    #endif\n    #ifndef FXAA_REDUCE_MUL\n        #define FXAA_REDUCE_MUL   (1.0 / 4.0)\n    #endif\n    #ifndef FXAA_SPAN_MAX\n        #define FXAA_SPAN_MAX     4.0\n    #endif\n\n    //optimized version for mobile, where dependent \n    //texture reads can be a bottleneck\n    vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n                vec2 v_rgbNW, vec2 v_rgbNE, \n                vec2 v_rgbSW, vec2 v_rgbSE, \n                vec2 v_rgbM) {\n        vec4 color;\n        mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n        vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n        vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n        vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n        vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n        vec4 texColor = texture2D(tex, v_rgbM);\n        vec3 rgbM  = texColor.xyz;\n        vec3 luma = vec3(0.299, 0.587, 0.114);\n        float lumaNW = dot(rgbNW, luma);\n        float lumaNE = dot(rgbNE, luma);\n        float lumaSW = dot(rgbSW, luma);\n        float lumaSE = dot(rgbSE, luma);\n        float lumaM  = dot(rgbM,  luma);\n        float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n        float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n        \n        mediump vec2 dir;\n        dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n        dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n        \n        float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                              (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n        \n        float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n        dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n                  max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n        \n        vec3 rgbA = 0.5 * (\n            texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n            texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n        vec3 rgbB = rgbA * 0.5 + 0.25 * (\n            texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n            texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n        float lumaB = dot(rgbB, luma);\n        if ((lumaB < lumaMin) || (lumaB > lumaMax))\n            color = vec4(rgbA, texColor.a);\n        else\n            color = vec4(rgbB, texColor.a);\n        return color;\n    }\n\n    void main() {\n      vec2 fragCoord = vUv * resolution;   \n      gl_FragColor = fxaa(tDiffuse, fragCoord, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n    }\n  "},D=r("e9d2"),A=r("1b53"),B=r("ab70");const N=new h["Cb"](1,0),L=new h["Cb"](0,1);class O extends A["b"]{constructor(e,t,r,n){super(),this.strength=void 0!==t?t:1,this.radius=r,this.threshold=n,this.resolution=void 0!==e?new h["Cb"](e.x,e.y):new h["Cb"](256,256),this.clearColor=new h["i"](0,0,0);let i={minFilter:h["H"],magFilter:h["H"],format:h["kb"],type:h["t"]};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new h["Fb"](o,a,i),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let c=0;c<this.nMips;c++){let e=new h["Fb"](o,a,i);e.texture.name="UnrealBloomPass.h"+c,e.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(e);let t=new h["Fb"](o,a,i);t.texture.name="UnrealBloomPass.v"+c,t.texture.generateMipmaps=!1,this.renderTargetsVertical.push(t),o=Math.round(o/2),a=Math.round(a/2)}let s=B["a"];this.highPassUniforms=h["Ab"].clone(s.uniforms),this.highPassUniforms["luminosityThreshold"].value=n,this.highPassUniforms["smoothWidth"].value=.01,this.materialHighPassFilter=new h["qb"]({uniforms:this.highPassUniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,defines:{}}),this.separableBlurMaterials=[];let l=[3,5,7,9,11];o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);for(let c=0;c<this.nMips;c++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(l[c])),this.separableBlurMaterials[c].uniforms["texSize"].value=new h["Cb"](o,a),o=Math.round(o/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms["blurTexture1"].value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms["blurTexture2"].value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms["blurTexture3"].value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms["blurTexture4"].value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms["blurTexture5"].value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms["bloomStrength"].value=t,this.compositeMaterial.uniforms["bloomRadius"].value=.1,this.compositeMaterial.needsUpdate=!0;let u=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms["bloomFactors"].value=u,this.bloomTintColors=[new h["Db"](1,1,1),new h["Db"](1,1,1),new h["Db"](1,1,1),new h["Db"](1,1,1),new h["Db"](1,1,1)],this.compositeMaterial.uniforms["bloomTintColors"].value=this.bloomTintColors,void 0===D["a"]&&console.error("UnrealBloomPass relies on CopyShader");let d=D["a"];this.copyUniforms=h["Ab"].clone(d.uniforms),this.copyUniforms["opacity"].value=1,this.materialCopy=new h["qb"]({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:h["a"],depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new h["i"],this.oldClearAlpha=1,this.basic=new h["Q"],this.fsQuad=new A["a"]}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()}setSize(e,t){let r=Math.round(e/2),n=Math.round(t/2);this.renderTargetBright.setSize(r,n);for(let i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(r,n),this.renderTargetsVertical[i].setSize(r,n),this.separableBlurMaterials[i].uniforms["texSize"].value=new h["Cb"](r,n),r=Math.round(r/2),n=Math.round(n/2)}render(e,t,r,n,i){e.getClearColor(this.oldClearColor),this.oldClearAlpha=e.getClearAlpha();let o=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),i&&e.state.buffers.stencil.setTest(!1),this.highPassUniforms["tDiffuse"].value=r.texture,this.highPassUniforms["luminosityThreshold"].value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let s=0;s<this.nMips;s++)this.fsQuad.material=this.separableBlurMaterials[s],this.separableBlurMaterials[s].uniforms["colorTexture"].value=a.texture,this.separableBlurMaterials[s].uniforms["direction"].value=N,e.setRenderTarget(this.renderTargetsHorizontal[s]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[s].uniforms["colorTexture"].value=this.renderTargetsHorizontal[s].texture,this.separableBlurMaterials[s].uniforms["direction"].value=L,e.setRenderTarget(this.renderTargetsVertical[s]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[s];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms["bloomStrength"].value=this.strength,this.compositeMaterial.uniforms["bloomRadius"].value=this.radius,this.compositeMaterial.uniforms["bloomTintColors"].value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms["tDiffuse"].value=this.renderTargetsHorizontal[0].texture,i&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(r),this.fsQuad.render(e),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=o}getSeperableBlurMaterial(e){return new h["qb"]({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new h["Cb"](.5,.5)},direction:{value:new h["Cb"](.5,.5)}},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n      ",fragmentShader:"\n        #include <common>\n        varying vec2 vUv;\n        uniform sampler2D colorTexture;\n        uniform vec2 texSize;\n        uniform vec2 direction;\n\n        float gaussianPdf(in float x, in float sigma) {\n          return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n        }\n        void main() {\n          vec2 invSize = 1.0 / texSize;\n          float fSigma = float(SIGMA);\n          float weightSum = gaussianPdf(0.0, fSigma);\n          vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n          for( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n            float x = float(i);\n            float w = gaussianPdf(x, fSigma);\n            vec2 uvOffset = direction * invSize * x;\n            vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n            vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n            diffuseSum += (sample1 + sample2) * w;\n            weightSum += 2.0 * w;\n          }\n          \n          gl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n        }\n      "})}getCompositeMaterial(e){return new h["qb"]({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n      ",fragmentShader:"\n        varying vec2 vUv;\n        uniform sampler2D blurTexture1;\n        uniform sampler2D blurTexture2;\n        uniform sampler2D blurTexture3;\n        uniform sampler2D blurTexture4;\n        uniform sampler2D blurTexture5;\n        uniform sampler2D dirtTexture;\n        uniform float bloomStrength;\n        uniform float bloomRadius;\n        uniform float bloomFactors[NUM_MIPS];\n        uniform vec3 bloomTintColors[NUM_MIPS];\n\n        float lerpBloomFactor(const in float factor) {\n          float mirrorFactor = 1.2 - factor;\n          return mix(factor, mirrorFactor, bloomRadius);\n        }\n\n        void main() {\n          gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n                          lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n                          lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n                          lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n                          lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n        }\n      "})}}var H={uniforms:{tDiffuse:{type:"t",value:0,texture:null},center:{type:"v2",value:new h["Cb"](.5,.5)},resolution:{type:"v2",value:new h["Cb"](window.innerWidth,window.innerHeight)},strength:{type:"f",value:.1},mix:{type:"f",value:.3}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n    vUv = vec2( uv.x, uv.y );\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform vec2 center;\n    uniform float strength;\n    uniform float mix;\n    uniform vec2 resolution;\n    varying vec2 vUv;\n\n    float random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}\n\n    // Gradient noise from Jorge Jimenez's presentation:\n    // http://www.iryoku.com/next-generation-post-processing-in-call-of-duty-advanced-warfare\n    float gradientNoise(vec2 uv)\n    {\n        const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);\n        return fract(magic.z * fract(dot(uv, magic.xy)));\n    }\n\n    void main() {\n\n      vec4 color = vec4(0.0);\n      float total = 0.0;\n      vec2 toCenter = ( center - vUv ) * resolution;\n\n      /* randomize the lookup values to hide the fixed number of samples */\n      float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n      for (float t = 0.0; t <= 40.0; t++) {\n        float percent = (t + offset) / 40.0;\n        float weight = 4.0 * (percent - percent * percent);\n        vec4 texSample = texture2D(tDiffuse, vUv + toCenter * percent / resolution);\n\n        texSample.rgb *= strength;\n        /* switch to pre-multiplied alpha to correctly blur transparent images */\n        texSample.rgb *= texSample.a;\n\n        color += texSample * weight;\n        total += weight;\n      }\n\n      vec4 diffuseColor = texture2D( tDiffuse, vUv );\n\n      gl_FragColor = diffuseColor + color*color / total * mix;\n\n      //gl_FragColor += (1.0/255.0) * gradientNoise(gl_FragCoord.xy) - (0.5/255.0);\n\n      \n\n    }\n  "};function R(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var V=0;function z(e){return"__private_"+V+++"_"+e}const U=new h["Q"]({color:0}),j=new h["Q"]({color:0});var I=z("renderer"),W=z("scene"),k=z("camera"),X=z("bloomAmount"),K=z("bloomProcessObjects"),Z=z("renderTargetBloom"),G=z("renderTargetGeneric"),Q=z("bloomComposer"),J=z("genericComposer"),Y=z("bloomPass"),q=z("fxaaPass"),$=z("zoomBlurPass"),ee=z("compositingPass"),te=z("renderPass"),re=z("particlesUseBloom"),ne=z("fadeAmount");class ie{constructor(e){Object.defineProperty(this,I,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,k,{writable:!0,value:void 0}),Object.defineProperty(this,X,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,Z,{writable:!0,value:void 0}),Object.defineProperty(this,G,{writable:!0,value:void 0}),Object.defineProperty(this,Q,{writable:!0,value:void 0}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,Y,{writable:!0,value:void 0}),Object.defineProperty(this,q,{writable:!0,value:void 0}),Object.defineProperty(this,$,{writable:!0,value:void 0}),Object.defineProperty(this,ee,{writable:!0,value:void 0}),Object.defineProperty(this,te,{writable:!0,value:void 0}),Object.defineProperty(this,re,{writable:!0,value:void 0}),Object.defineProperty(this,ne,{writable:!0,value:void 0}),R(this,W)[W]={},R(this,k)[k]={},R(this,K)[K]=[],R(this,re)[re]=!1,R(this,ne)[ne]=0,R(this,I)[I]=e,R(this,X)[X]=0,R(this,Z)[Z]=new h["Fb"](window.innerWidth,window.innerHeight,{minFilter:h["H"],magFilter:h["H"],format:h["kb"],stencilBuffer:!0,encoding:h["G"],type:h["t"]}),R(this,G)[G]=new h["Fb"](window.innerWidth,window.innerHeight,{minFilter:h["H"],magFilter:h["H"],format:h["kb"],stencilBuffer:!0,encoding:h["G"],type:h["t"]}),R(this,Q)[Q]=new T["a"](R(this,I)[I],R(this,Z)[Z]),R(this,Q)[Q].setPixelRatio(1),R(this,J)[J]=new T["a"](R(this,I)[I],R(this,G)[G]),R(this,J)[J].setPixelRatio(S.size.sizeRatio),R(this,Y)[Y]=new O(new h["Cb"](window.innerWidth,window.innerHeight),.61,.08,.06),R(this,Y)[Y].needsSwap=!1,R(this,Y)[Y].threshold=.06,R(this,Y)[Y].strength=.91,R(this,Y)[Y].radius=.06,R(this,Y)[Y].enabled=!0,R(this,$)[$]=new F["a"](H),R(this,q)[q]=new F["a"](P),R(this,q)[q].enabled=1===window.devicePixelRatio,R(this,te)[te]=new _["a"](R(this,W)[W],R(this,k)[k],void 0,void 0,1),R(this,te)[te].clear=!0,R(this,te)[te].needsSwap=!1,R(this,Q)[Q].addPass(R(this,te)[te]),R(this,Q)[Q].addPass(R(this,Y)[Y]),R(this,ee)[ee]=new F["a"](E),R(this,ee)[ee].uniforms.tBloom.value=R(this,Q)[Q].renderTarget2.texture,R(this,ee)[ee].renderToScreen=!1,R(this,J)[J].addPass(R(this,te)[te]),R(this,J)[J].addPass(R(this,ee)[ee]),this.setBloomAmount(.6)}set fadeAmount(e){R(this,ne)[ne]=e,R(this,ee)[ee].uniforms.fadeAmount.value=R(this,ne)[ne]}setSceneAndCamera(e,t){R(this,W)[W]=e,R(this,k)[k]=t,R(this,te)[te].camera=t,R(this,te)[te].scene=e}setBloomAmount(e){R(this,X)[X]=e,R(this,ee)[ee].uniforms.bloomAmount.value=R(this,X)[X]}updateBloomList(){R(this,K)[K].length=0,R(this,W)[W]&&R(this,W)[W].children&&R(this,W)[W].traverse(e=>{"Mesh"!==e.type&&"SkinnedMesh"!==e.type&&"Group"!==e.type&&!e.userData.isParticleSystem||!0!==e.userData.enableBloom&&!1!==e.userData.enableBloom&&!e.userData.hideFromBloom&&!e.userData.isParticleSystem||e.name.includes("Collider")||e.name.includes("Sensor")||R(this,K)[K].find(t=>e.uuid&&t.uuid===e.uuid)||R(this,K)[K].push(e)})}render(e,t){R(this,X)[X]>0?(R(this,Y)[Y].enabled=!0,0===R(this,K)[K].length&&this.updateBloomList(),R(this,K)[K].forEach(e=>{if(e.userData.hideFromBloom)e.userData.visibleStateBeforeBloom=e.visible,e.visible=!1;else if(e.userData.isParticleSystem)R(this,re)[re]||(e.visible=!1);else if(!1===e.userData.enableBloom||void 0===e.userData.enableBloom){const t=e;t.userData.originalMaterial=t.material,t.material="SkinnedMesh"===t.type?j:U}else{const t=e;if(t){const e=t.material;e.userData.shader&&e.userData.shader.uniforms.isBloomRender&&(e.userData.shader.uniforms.isBloomRender.value=1),e.uniforms&&e.uniforms.isBloomRender&&(e.uniforms.isBloomRender.value=1)}}}),R(this,Q)[Q].render(t),R(this,K)[K].forEach(e=>{if(e.userData.hideFromBloom)e.visible=e.userData.visibleStateBeforeBloom;else if(e.userData.isParticleSystem)e.visible=!0;else if(!1===e.userData.enableBloom||void 0===e.userData.enableBloom){const t=e;t.material=t.userData.originalMaterial}else{const t=e;if(t){const e=t.material;e.userData.shader&&e.userData.shader.uniforms.isBloomRender&&(e.userData.shader.uniforms.isBloomRender.value=0),e.uniforms&&e.uniforms.isBloomRender&&(e.uniforms.isBloomRender.value=0)}}})):R(this,Y)[Y].enabled=!1,R(this,J)[J].render(t),R(this,I)[I].setRenderTarget(null)}resize(){const e=S.size,t=e.width,r=e.height;R(this,J)[J].setSize(t,r),R(this,Q)[Q].setSize(t,r),R(this,q)[q].uniforms.resolution.value.set(t,r),R(this,ee)[ee].uniforms.resolution.value.set(t,r),R(this,ee)[ee].uniforms.tBloom.value=R(this,Q)[Q].renderTarget2.texture}dispose(){}}var oe=r("4a72"),ae=r("34ad"),se=r("282a"),le=r("34eb"),ue=r.n(le);function he(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var de=0;function ce(e){return"__private_"+de+++"_"+e}const ve=new h["xb"],me=new ae["a"],fe=new oe["a"];var pe=ce("pmremGenerator"),ge=ce("textureLibrary"),be=ce("modelLibrary"),we=ce("animationsLibrary"),Ce=ce("materialLibrary"),xe=ce("loadedCoins"),ye=ce("optionalLoadingItems"),Me=ce("namespaceWeakMap");class Se{constructor(){Object.defineProperty(this,pe,{writable:!0,value:void 0}),Object.defineProperty(this,ge,{writable:!0,value:void 0}),Object.defineProperty(this,be,{writable:!0,value:void 0}),Object.defineProperty(this,we,{writable:!0,value:void 0}),Object.defineProperty(this,Ce,{writable:!0,value:void 0}),Object.defineProperty(this,xe,{writable:!0,value:void 0}),Object.defineProperty(this,ye,{writable:!0,value:void 0}),Object.defineProperty(this,Me,{writable:!0,value:void 0}),he(this,pe)[pe]={},he(this,ge)[ge]=new Map,he(this,be)[be]=new Map,he(this,we)[we]=new Map,he(this,Ce)[Ce]=new Map,he(this,xe)[xe]=new Map,he(this,ye)[ye]=[],this.onEnvMapUpdated=new b,he(this,Me)[Me]=new WeakMap}async init(){he(this,pe)[pe]=new h["cb"](g.getRenderer()),he(this,pe)[pe].compileEquirectangularShader();const e=[...se];return this.loadInitialManifest(e)}addCoinToManifest(e,t){void 0===e.find(e=>e.key===t.modelName)&&e.push({key:t.modelName,url:"./models/coins/"+t.modelName}),e.push({key:t.normalMap,url:"./textures/coins/"+t.normalMap}),e.push({key:t.diffuseMap,url:"./textures/coins/"+t.diffuseMap})}loadSingleCoin(e){if(this.isCoinLoaded(e.denomination))return Promise.resolve();const t=[];return this.addCoinToManifest(t,e),new Promise((r,n)=>{this.loadManifest(t,"coins").then(()=>{he(this,xe)[xe].set(e.denomination,!0),r()},()=>{n()})})}isCoinLoaded(e){return!(!he(this,xe)[xe].has(e)||!he(this,xe)[xe].get(e))}loadInitialManifest(e){return new Promise((t,r)=>{this.loadManifest(e,"global").then(()=>{t()},()=>{r()})})}loadManifest(e,t){const r=e.map(e=>new Promise((r,n)=>{const i=()=>{r()},o=()=>{},a=()=>{n()};e.onlyPreload?i():e.url.includes(".png")||e.url.includes(".jpg")?ve.load(e.url,r=>{r.flipY=!1,r.wrapS=r.wrapT=h["ob"],r.encoding=h["Hb"],this.addTexture(e.key,r,t),i()},o,a):e.url.includes(".gltf")||e.url.includes(".glb")?me.load(e.url,r=>{this.addAnimations(e.key,r.animations,t),this.addModel(e.key,r.scene,t),i()},o,a):e.url.includes(".exr")&&fe.setDataType(h["Bb"]).load(e.url,r=>{r.flipY=!1;const n=he(this,pe)[pe].fromEquirectangular(r);this.addTexture(e.key,n.texture,t),r.dispose(),i()},o,a)}));return Promise.all(r).then(()=>{},e=>{console.error("Could not load all textures:",e)})}unloadManifest(e){e.forEach(e=>{this.removeTexture(e.key),this.removeModel(e.key)})}unloadNamespace(e){const t=[];he(this,ge)[ge].forEach((r,n)=>{he(this,Me)[Me].has(r)&&he(this,Me)[Me].get(r)===e&&(t.push(n),he(this,Me)[Me].delete(r))}),t.forEach(e=>{this.removeTexture(e)});const r=[];he(this,be)[be].forEach((t,n)=>{he(this,Me)[Me].has(t)&&he(this,Me)[Me].get(t)===e&&(r.push(n),he(this,Me)[Me].delete(t))}),r.forEach(e=>{this.removeModel(e)});const n=[];he(this,we)[we].forEach((t,r)=>{he(this,Me)[Me].has(t)&&he(this,Me)[Me].get(t)===e&&(n.push(r),he(this,Me)[Me].delete(t))}),n.forEach(e=>{this.removeAnimations(e)});const i=[];he(this,Ce)[Ce].forEach((t,r)=>{he(this,Me)[Me].has(t)&&he(this,Me)[Me].get(t)===e&&(i.push(r),he(this,Me)[Me].delete(t))}),i.forEach(e=>{this.removeModel(e)})}addTexture(e,t,r){he(this,ge)[ge].has(e)||(he(this,Me)[Me].set(t,r),he(this,ge)[ge].set(e,t))}getTexture(e){if(he(this,ge)[ge].has(e)){const t=he(this,ge)[ge].get(e);return t||null}return null}getTextureAsync(e,t="global"){return new Promise((r,n)=>{const i=this.getTexture(e);if(i)r(i);else{const i=he(this,ye)[ye].find(t=>t.key===e);i?ve.load(i.url,e=>{e.flipY=!1,e.wrapS=e.wrapT=h["ob"],e.encoding=h["Hb"],this.addTexture(i.key,e,t),r(e)}):(console.warn("opn",e,he(this,ye)[ye]),ue()("optional asset does not exist: "+e),n())}})}removeTexture(e){he(this,ge)[ge].has(e)&&(he(this,ge)[ge].get(e)&&he(this,ge)[ge].get(e).dispose(),he(this,ge)[ge].delete(e))}addModel(e,t,r){t.userData.enableBloom=!1,he(this,be)[be].has(e)||(he(this,Me)[Me].set(t,r),he(this,be)[be].set(e,t))}getModel(e){return he(this,be)[be].has(e)?he(this,be)[be].get(e):void 0}removeModel(e){he(this,be)[be].has(e)&&he(this,be)[be].delete(e)}addAnimations(e,t,r){he(this,we)[we].has(e)||(he(this,we)[we].set(e,t),he(this,Me)[Me].set(t,r))}getAnimations(e){return he(this,we)[we].has(e)?he(this,we)[we].get(e):void 0}removeAnimations(e){he(this,we)[we].has(e)&&he(this,we)[we].delete(e)}addMaterial(e,t,r){he(this,Me)[Me].set(t,r),he(this,Ce)[Ce].set(e,t)}getMaterial(e){return he(this,Ce)[Ce].has(e)?he(this,Ce)[Ce].get(e):void 0}removeMaterial(e){he(this,Ce)[Ce].has(e)&&he(this,Ce)[Ce].delete(e)}}var Te,_e=new Se;(function(e){e["NotDefined"]="NotDefined",e["ALL"]="All",e["TJISEK"]="TJISEK",e["SEK"]="SEK",e["TJIEUR"]="TJIEUR",e["EUR"]="EUR"})(Te||(Te={}));Te.NotDefined,Te.ALL,Te.TJISEK,Te.SEK,Te.TJIEUR,Te.EUR;var Fe,Ee=Te;(function(e){e[e["None"]=0]="None",e[e["OneFraction"]=1]="OneFraction",e[e["TwoFraction"]=2]="TwoFraction",e[e["ThreeFraction"]=3]="ThreeFraction",e[e["FourFraction"]=4]="FourFraction",e[e["FiveFraction"]=5]="FiveFraction",e[e["SixFraction"]=6]="SixFraction",e[e["SevenFraction"]=7]="SevenFraction",e[e["EightFraction"]=8]="EightFraction",e[e["NineFraction"]=9]="NineFraction",e[e["TenFraction"]=10]="TenFraction",e[e["TwentyFraction"]=20]="TwentyFraction",e[e["ThirtyFraction"]=30]="ThirtyFraction",e[e["FortyFraction"]=40]="FortyFraction",e[e["FiftyFraction"]=50]="FiftyFraction",e[e["SixtyFraction"]=60]="SixtyFraction",e[e["SeventyFraction"]=70]="SeventyFraction",e[e["EightyFraction"]=80]="EightyFraction",e[e["NinetyFraction"]=90]="NinetyFraction",e[e["One"]=100]="One",e[e["Two"]=200]="Two",e[e["Three"]=300]="Three",e[e["Four"]=400]="Four",e[e["Five"]=500]="Five",e[e["Six"]=600]="Six",e[e["Seven"]=700]="Seven",e[e["Eight"]=800]="Eight",e[e["Nine"]=900]="Nine",e[e["Ten"]=1e3]="Ten",e[e["Twenty"]=2e3]="Twenty",e[e["Thirty"]=3e3]="Thirty",e[e["Forty"]=4e3]="Forty",e[e["Fifty"]=5e3]="Fifty",e[e["Sixty"]=6e3]="Sixty",e[e["Seventy"]=7e3]="Seventy",e[e["Eighty"]=8e3]="Eighty",e[e["Ninety"]=9e3]="Ninety",e[e["OneHundred"]=1e4]="OneHundred",e[e["TwoHundred"]=2e4]="TwoHundred",e[e["ThreeHundred"]=3e4]="ThreeHundred",e[e["FourHundred"]=4e4]="FourHundred",e[e["FiveHundred"]=5e4]="FiveHundred",e[e["SixHundred"]=6e4]="SixHundred",e[e["SevenHundred"]=7e4]="SevenHundred",e[e["EightHundred"]=8e4]="EightHundred",e[e["NineHundred"]=9e4]="NineHundred",e[e["OneThousand"]=1e5]="OneThousand",e[e["TwoThousand"]=2e5]="TwoThousand",e[e["ThreeThousand"]=3e5]="ThreeThousand",e[e["FourThousand"]=4e5]="FourThousand",e[e["FiveThousand"]=5e5]="FiveThousand",e[e["SixThousand"]=6e5]="SixThousand",e[e["SevenThousand"]=7e5]="SevenThousand",e[e["EightThousand"]=8e5]="EightThousand",e[e["NineThousand"]=9e5]="NineThousand"})(Fe||(Fe={}));var Pe=Fe;const De=[],Ae=e=>{switch(e){case 100:case 200:case 2e3:case 3e3:case 4e3:case 1e4:case 2e4:case 3e4:case 1e5:case 3e5:return 13213838;case 300:case 400:case 5e3:case 6e3:case 7e3:case 4e4:case 5e4:case 6e4:case 2e5:case 4e5:case 6e5:return 16579317;case 500:case 600:case 700:case 800:case 900:case 1e3:case 8e3:case 9e3:case 7e4:case 8e4:case 9e4:case 5e5:case 7e5:case 8e5:case 9e5:return 16763751}return 16777215},Be=[Pe.One,Pe.Two,Pe.Three,Pe.Four,Pe.Five,Pe.Six,Pe.Seven,Pe.Eight,Pe.Nine,Pe.Ten];Be.forEach((e,t)=>{De.push({denomination:e,currency:Ee.ALL,radius:86,extraLevelScale:1+(t>2?.1:0)+(t>3?.1:0),level:1,weight:.003,modelName:"Level_1_Coin.glb",normalMap:"Level_1_"+Number(e)/100+"KR_normal.png",diffuseMap:"Level_1_"+Number(e)/100+"KR_BaseColor.png",gemColor:0,baseColor:Ae(e),loadOnStart:!0})});const Ne=[Pe.Twenty,Pe.Thirty,Pe.Forty,Pe.Fifty,Pe.Sixty,Pe.Seventy,Pe.Eighty,Pe.Ninety];Ne.forEach((e,t)=>{De.push({denomination:e,currency:Ee.ALL,radius:222,extraLevelScale:1+(t>2?.1:0)+(t>5?.1:0),level:2,weight:.002,modelName:"Level_2_Coin.glb",normalMap:"Level_2_"+Number(e)/100+"KR_normal.png",diffuseMap:"Level_2_"+Number(e)/100+"KR_BaseColor.png",gemColor:0,baseColor:Ae(e),loadOnStart:!1})});const Le=[Pe.OneHundred,Pe.TwoHundred,Pe.ThreeHundred,Pe.FourHundred,Pe.FiveHundred,Pe.SixHundred,Pe.SevenHundred,Pe.EightHundred,Pe.NineHundred],Oe=[4947484,5217316,5620784,346750,549030,883923,9446296,11808447,13908193,3381555,3355545];Le.forEach((e,t)=>{De.push({denomination:e,currency:Ee.ALL,radius:220,extraLevelScale:1+(t>2?.1:0)+(t>5?.1:0),weight:.001,level:3,modelName:"Level_3_Coin.glb",normalMap:"Level_3_"+Number(e)/100+"KR_normal.png",diffuseMap:"Level_3_"+Number(e)/100+"KR_BaseColor.png",gemColor:Oe[t],baseColor:Ae(e),loadOnStart:!1})});const He=[Pe.OneThousand,Pe.TwoThousand,Pe.ThreeThousand,Pe.FourThousand,Pe.FiveThousand,Pe.SixThousand,Pe.SevenThousand,Pe.EightThousand,Pe.NineThousand];He.forEach((e,t)=>{De.push({denomination:e,currency:Ee.ALL,radius:300,extraLevelScale:1,level:4,weight:.001,modelName:"Level_4_Coin.glb",normalMap:"Level_4_"+Number(e)/100+"KR_normal.png",diffuseMap:"Level_4_"+Number(e)/100+"KR_BaseColor.png",gemColor:0,baseColor:Ae(e),loadOnStart:!1})});var Re=De;function Ve(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var ze=0;function Ue(e){return"__private_"+ze+++"_"+e}var je=Ue("definitionByDenomination");class Ie{constructor(){Object.defineProperty(this,je,{writable:!0,value:void 0}),Ve(this,je)[je]=new Map,Re.forEach(e=>{Ve(this,je)[je].set(e.denomination,e)})}getCoinDefinition(e){return Ve(this,je)[je].get(e)}}var We=new Ie,ke="#if defined( USE_ENVMAP )\n#ifdef ENVMAP_MODE_REFRACTION\n\tuniform float refractionRatio;\n#endif\nvec3 getIBLIrradiance( const in vec3 normal ) {\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t#else\n\t\treturn vec3( 0.0 );\n\t#endif\n}\nvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 reflectVec;\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\treflectVec = reflect( - viewDir, normal  + vec3(0.3,0.4,0.0));\n\t\t\t// Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t#else\n\t\treturn vec3( 0.0 );\n\t#endif\n}\n#endif\n",Xe={getMaterial(e,t,r=0){const n=new h["S"]({normalMap:new h["wb"],map:new h["wb"],metalness:1,roughness:.07,envMap:_e.getTexture("envMap"),envMapIntensity:1,vertexColors:!1,color:16777215});return n.normalMap=_e.getTexture(e),n.map=_e.getTexture(t),n.userData.shader={uniforms:{isBloomRender:{value:0},envMapTint:{value:new h["i"]}}},r>0&&(n.defines["USE_CRYSTAL"]=""),n.onBeforeCompile=e=>{e.uniforms.gemColor={value:new h["i"](r)},e.uniforms.envMapTint=n.userData.shader.uniforms.envMapTint,e.uniforms.volumetricNoiseMap={value:_e.getTexture("coin-noise")},e.uniforms.isBloomRender={value:0},e.vertexShader=e.vertexShader.replace("#include <common>","\n          attribute vec3 instanceColor;\n\t\t\t\t\tvarying vec3 vInstanceColor;\n\t\t\t\t\t#include <common>\n        \n        ").replace("#include <begin_vertex>","\n          #include <begin_vertex>\n          vInstanceColor = instanceColor;\n        "),e.fragmentShader=e.fragmentShader.replace("uniform vec3 diffuse;","\n            varying vec3 vInstanceColor;\n            uniform vec3 diffuse;\n            uniform vec3 gemColor;\n            uniform vec3 envMapTint;\n            uniform float isBloomRender;\n            uniform sampler2D volumetricNoiseMap;\n            vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm ) {\n              vec3 vSigmaX = dFdx( surf_pos );\n              vec3 vSigmaY = dFdy( surf_pos );\n              vec3 vN = normalize(surf_norm);    // normalized\n              vec3 R1 = cross( vSigmaY, vN );\n              float fDet = dot( vSigmaX, R1 );\n              return normalize( abs( fDet ) * surf_norm  );\n            }\n          ").replace("#include <envmap_physical_pars_fragment>",ke).replace("#include <color_fragment>","\n          float isSwatch5 = 1.0-smoothstep(0.0, 0.1,texelColor.r+texelColor.g+texelColor.b);\n\n          float highlightMask = 0.0;\n          vec4 noiseColor = vec4(0.0);\n\n          #if defined( USE_CRYSTAL )\n            vec3 normalInTangentSpace = perturbNormalArb(normalize(vViewPosition),vNormal);\n            float random = 0.4;\n          \n            // perlin-isch noise\n            vec2 uvMultiplier = vec2(0.5);\n            float offsetAmount = texture2D( volumetricNoiseMap, vUv * 0.6 + vec2(random,random)).r;\n            vec2 newUV = (vUv * uvMultiplier + vec2(random, random)) + vec2( (normalInTangentSpace.xy + normalInTangentSpace.z*0.2)) * offsetAmount;\n            noiseColor = texture2D( volumetricNoiseMap, newUV)*3.0;\n            \n            highlightMask = smoothstep(0.3,0.6,(noiseColor.r + noiseColor.g + noiseColor.b)*0.3) * isSwatch5 * 0.05;\n          #endif\n\n          vec3 gemPlusNoiseColor = vInstanceColor; //gemroom\n          gemPlusNoiseColor *= noiseColor.rgb;\n          \n          diffuseColor.rgb = texelColor.rgb;\n          diffuseColor.rgb += gemPlusNoiseColor * isSwatch5;\n        ").replace("#include <metalnessmap_fragment>","\n          float metalnessFactor = metalness * (1.0-isSwatch5);\n        ").replace("vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;","\n          totalEmissiveRadiance = diffuseColor.rgb * ( 0.1 + 0.8 * highlightMask) * isSwatch5;\n          vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n        ").replace("#include <output_fragment>","\n          gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n          \n          gl_FragColor = mix(gl_FragColor,vec4(totalEmissiveRadiance,1.0), isBloomRender);\n          //gl_FragColor.rgb = clamp(gl_FragColor.rgb, vec3(0.0), vec3(1.4));\n          \n        "),n.userData.shader=e},n}},Ke=r("1e5c");function Ze(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ge=0;function Qe(e){return"__private_"+Ge+++"_"+e}var Je=Qe("ambienceChannel1"),Ye=Qe("ambienceChannel2"),qe=Qe("currentAmbientIds");class $e{constructor(){Object.defineProperty(this,Je,{writable:!0,value:void 0}),Object.defineProperty(this,Ye,{writable:!0,value:void 0}),Object.defineProperty(this,qe,{writable:!0,value:void 0}),this.soundMaps=new Map,Ze(this,qe)[qe]=[],this.onAppActiveChanged=e=>{e?Ke["Howler"].mute(!1):Ke["Howler"].mute(!0)},Ke["Howler"].volume(.3)}async registerSoundMap(e,t){this.soundMaps.set(e,t)}unregisterSoundMap(e){this.soundMaps.delete(e)}setSoundVolume(e,t){"running"===Ke["Howler"].ctx.state&&e.volume(t)}changeAmbience(e){Ze(this,qe)[qe].join("")!==e.join("")&&(Ze(this,qe)[qe]=e.concat(),Ze(this,Je)[Je]?(Ze(this,Je)[Je].off("fade"),Ze(this,Je)[Je].once("fade",()=>{e.length>0?(Ze(this,Je)[Je]=this.play(e[0]),Ze(this,Je)[Je].fade(0,Ze(this,Je)[Je].volume(),400)):Ze(this,Je)[Je]=void 0}),Ze(this,Je)[Je].fade(Ze(this,Je)[Je].volume(),0,400)):e.length>0&&(Ze(this,Je)[Je]=this.play(e[0]),Ze(this,Je)[Je].fade(0,Ze(this,Je)[Je].volume(),400)),Ze(this,Ye)[Ye]?(Ze(this,Ye)[Ye].off("fade"),Ze(this,Ye)[Ye].once("fade",()=>{e.length>1?(Ze(this,Ye)[Ye]=this.play(e[1]),Ze(this,Ye)[Ye].fade(0,Ze(this,Ye)[Ye].volume(),400)):Ze(this,Ye)[Ye]=void 0}),Ze(this,Ye)[Ye].fade(Ze(this,Ye)[Ye].volume(),0,400)):e.length>1&&(Ze(this,Ye)[Ye]=this.play(e[1]),Ze(this,Ye)[Ye].fade(0,Ze(this,Ye)[Ye].volume(),400)))}play(e,t=1){let r=`sounds/${e}.mp3`,n=!1,i=1;const o=this.getMapItem(e);o?(r=`sounds/${o.file}.mp3`,o.loop&&(n=!0),o.volume&&(i=o.volume),o.randomVolume&&(i*=1-Math.random()*o.randomVolume),i=h["N"].clamp(i,0,1)):console.log("no sound in map with id:"+e);const a=new Ke["Howl"]({src:r,rate:t,loop:n,volume:i});return a.play(),a}startLoop(e){let t=`sounds/${e}.wav`,r=0;const n=this.getMapItem(e);n?(t=`sounds/${n.file}.mp3`,n.volume&&(r=n.volume)):console.log("no sound in map with id:"+e);const i=new Ke["Howl"]({src:t,loop:!0,volume:r});return i.play(),i}getMapItem(e){let t=void 0;return this.soundMaps.forEach(r=>{const n=r.find(t=>t.id===e);n&&(t=n)}),t}}var et=new $e;function tt(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var rt=0;function nt(e){return"__private_"+rt+++"_"+e}var it=nt("dictionary");class ot{constructor(){Object.defineProperty(this,it,{writable:!0,value:void 0}),tt(this,it)[it]={};let e=window.location.href.substring(window.location.href.indexOf("?")+1,window.location.href.length);-1!==e.indexOf("#")&&(e=e.substring(0,e.indexOf("#")));const t=e.split("&");for(let r=0;r<t.length;r++){const e=t[r].split("="),n=decodeURIComponent(e[0]),i=decodeURIComponent(e[1]);tt(this,it)[it][n]=i||!0}}get(e){return tt(this,it)[it][e]}}var at=new ot;const st=10,lt=Math.pow(st,3),ut=new h["Z"],ht=[];for(let _t=0;_t<lt;_t++)ht.push(Math.random()),ht.push(Math.random()),ht.push(Math.random());class dt{constructor(){this.running=!0,this.clock=new h["h"],this.time=0,this.bloomListIsDirty=!0,this.gameLoop=()=>{this.running&&requestAnimationFrame(this.gameLoop);let e=this.clock.getDelta();e>.027&&(e=.027),this.time+=e,this.update(this.time,e)},this.resize=()=>{const e=S.size;this.renderer.setSize(e.width,e.height),this.postEffectManager.resize();const t=this.camera;t.aspect=e.width/e.height,t.updateProjectionMatrix()},this.renderer=g.getRenderer(),this.postEffectManager=new ie(this.renderer),this.scene=new h["pb"],this.scene.background=new h["i"](0),this.scene.fog=new h["q"](0,7,12),this.camera=new h["db"](53,window.innerWidth/window.innerHeight,.1,50),this.postEffectManager.setSceneAndCamera(this.scene,this.camera),this.postEffectManager.updateBloomList(),this.camera.position.z=4,this.camera.position.y=.2,this.camera.rotation.x=-.4;const e=new h["eb"](16777215,10);e.position.set(0,0,-2),this.light=e;const t=at.get("d");let r;if(t){let e=parseInt(t);e<100?e=100:e>4e5&&(e=4e5),r=e}else r=Pe.Ten;const n=We.getCoinDefinition(r);_e.loadSingleCoin(n).then(()=>{const e=_e.getModel(n.modelName);this.processCoin(e,n),this.gameLoop()}),et.changeAmbience(["ambience_vault"]),S.onResize.add(this.resize),this.resize()}processCoin(e,t){const r=e.clone().children.filter(e=>"Mesh"===e.type)[0],n=Xe.getMaterial(t.normalMap,t.diffuseMap,t.gemColor),i=r.geometry;i.scale(15,15,15);const o=i.boundingBox.max.y-i.boundingBox.min.y+.01,a=Math.max(i.boundingBox.max.x-i.boundingBox.min.x,i.boundingBox.max.z-i.boundingBox.min.z),s=new h["w"](r.geometry,n,lt);s.castShadow=!1,s.receiveShadow=!1,s.userData.enableBloom=!1,this.scene.add(s),s.material=n,this.coins=s;let l=0;const u=(st-1)/2;for(let h=0;h<st;h++)for(let e=0;e<st;e++){const t=Math.ceil(Math.random()*st)+1;for(let r=0;r<t;r++)ut.position.x=(u-h)*a+(0===r?.5*a:0),ut.position.z=(u-e)*a,ut.position.y=-(u-r)*o-1,ut.rotation.y=Math.pow(r/t,2)*Math.random()*3,ut.updateMatrix(),this.coins.setMatrixAt(l++,ut.matrix)}const d=[];for(let h=0;h<lt;h++)d.push(Math.random()),d.push(Math.random()),d.push(Math.random());i.setAttribute("instanceColor",new h["v"](new Float32Array(d),3))}update(e,t){this.coins&&(this.coins.rotation.y+=.1*t,this.coins.instanceMatrix.needsUpdate=!0),g.usePostEffects?(this.bloomListIsDirty&&(this.bloomListIsDirty=!1,this.postEffectManager.updateBloomList()),this.postEffectManager.render(e,t)):this.renderer.render(this.scene,this.camera),this.renderer.info.reset()}}let ct,vt=class extends s["b"]{mounted(){this.$refs.threeTargetContainer&&this.$refs.threeTargetContainer.appendChild(g.el),ct=new dt}};vt=Object(a["a"])([s["a"]],vt);var mt=vt,ft=mt,pt=(r("7538"),r("2877")),gt=Object(pt["a"])(ft,l,u,!1,null,"ac450e50",null),bt=gt.exports;let wt=class extends s["b"]{};wt=Object(a["a"])([Object(s["a"])({components:{ExperimentWrapper:bt}})],wt);var Ct=wt,xt=Ct,yt=(r("5c0b"),Object(pt["a"])(xt,i,o,!1,null,null,null)),Mt=yt.exports,St=r("9b34");ue.a.disable(),n["a"].config.productionTip=!1;const Tt=async()=>{await S.init(),await _e.init(),await et.registerSoundMap("vault",St),new n["a"]({el:"#app",render:e=>e(Mt)})};Tt()}});
//# sourceMappingURL=app.346baf39.js.map